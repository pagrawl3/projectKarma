function initializeModal(){$("section.modal").css({left:$(window).width()/2-$("section.modal").width()/2,top:$(window).height()/2-$("section.modal").height()/2})}function functionForLogin(){if(sessionStorage.getItem("username")){$("nav.header-nav").css("display","none");$("nav.header-create").css("opacity","1");$("nav.header-create").css("display","inline-block")}}function registerClick(){var e=$("#req").val();$(".table .column.ten.status").append('<div class="row main entypo-check icon selected tick"></div>');$(".table .column.forty.name").append('<div class="row main">'+e+"</div>");$(".table .column.forty.providers").append('<div class="row main" id="prov'+provIndex+'"><em>none</em></div>');$(".table .column.ten.actions").append('<div class="row main entypo-thumbs-up icon thumbs"></div>');provIndex++}function initializeFormClickHandlers(e){console.log("here");$("span.entypo-plus-circled.icon").on("click",function(t){console.log("click registered");e.emit("reqClicked",{success:!0});registerClick()});$(document).on("click",".thumbs",function(t){console.log("WE ARE GETTING CLICKED HEHE");$(this).parents(".table").find(".providers .main").text(sessionStorage.getItem("username"));console.log($(this).parents(".table").find(".providers .main").attr("id"));var n="#"+$(this).parents(".table").find(".providers .main").attr("id");e.emit("beingEdited",{field:n,value:sessionStorage.getItem("username")})});$("form.create-task").submit(function(t){t.preventDefault();var n={};n.name=$("form.create-task #name").val();n.desc=$("form.create-task #desc").val();n.req=[];var r={};$("form.create-task .table .column.forty.name .row.main").each(function(e,t){console.log(e);r.name=$(t).text();n.req.push(r)});$("form.create-task .table .column.forty.providers .row.main").each(function(e,t){n.req[e].providers=[$(t).text()]});n.deadline=$("form.create-task #deadline").val();console.log(n);e.emit("createNewTask",{task:n,scale:2120});e.on("createNewTaskSuccessful",function(t){e.emit("getTasks",{scale:2120});console.log(t)});return!1})}function initializeMapClickHandlers(){var e=0;$("#scale-slider").slider({animate:"fast",min:0,max:5e3,step:500,slide:function(e,t){var n=t.value;$("span.scale-slider").text(n)}});$("button.filter").on("click",function(e){if(!$(this).hasClass("selected")){$(".selected").removeClass("selected");$(this).addClass("selected");if(!$(this).hasClass("text")){$("input.search").css("opacity",0);window.setTimeout(function(){$("input.search").css("display","none");$(".scale-slider").css("display","block");$(".scale-slider").css("opacity","1")},200)}else{$(".scale-slider").css("opacity",0);window.setTimeout(function(){$(".scale-slider").css("display","none");$("input.search").css("display","inline-block");$("input.search").css("opacity","1")},200)}}});var t=!1;$("button.submit").on("click",function(e){$("section.search-results .results").empty();if(!t){var n=$("section.map-overlay").offset().left-50;$("section.map-overlay").css("left","-"+n+"px");t=!0}var r={};r.type=$(".selected").attr("id");$(".selected").hasClass("text")?r.value=$("input.search").val():r.value=$("span.scale-slider").text();console.log(r);findType(r,function(e){function t(e,t,n,r,i){return'<a href="/ngo/'+i+'"><article class="result '+r+'">'+'<div class="result-logo">'+r+"</div>"+'<header class="result-title">'+e+"</header>"+'<span class="string">'+'<span class="entypo-location"></span> &nbsp'+t+" &nbsp; &nbsp;"+'<span class="entypo-flag"></span>'+n.toString()+"</span>"+"</article></a>"}for(var n in e){console.log(e[n]);if(e[n].type=="ngo"){var r=t(e[n].body.name,e[n].body.location,e[n].body.work,"NGO",e[n].body.scale);$("section.search-results .results").append(r)}else{var r=t(e[n].body.name,e[n].body.location,e[n].body.work,"INIT",e[n].body.scale);$("section.search-results .results").append(r)}}console.log(e);$("section.search-results").css("display","block");$("#search-title").css("display","inline-block");window.setTimeout(function(){$("section.search-results").css("padding","30px");$("section.search-results").css("margin","20px 0");$("section.search-results").css("height","auto")},200);window.setTimeout(function(){$("section.search-results").css("opacity","1");$("#search-title").css("opacity","1")},400)})})}$(document).ready(function(){"use strict";function t(){$("section.modal").css("display","block");$("section.overlay").css("display","block");window.setTimeout(function(){$("section.modal").css({marginTop:"0px",opacity:"1"});$("section.overlay").css("opacity","1")},50)}function n(){$("section.modal").css({marginTop:"-20px",opacity:"0"});$("section.overlay").css("opacity","0");window.setTimeout(function(){$("section.modal").css("display","none");$("section.overlay").css("display","none")},50)}var e=io.connect("/");e.emit("test",{success:!0});e.on("testCallback",function(e){console.log("client side test successful")});loadScript();$("#desc").on("keyup",function(){e.emit("beingEdited",{field:"#desc",value:$("#desc").val()})});$("#name").on("keyup",function(){e.emit("beingEdited",{field:"#name",value:$("#name").val()})});$("#req").on("keyup",function(){e.emit("beingEdited",{field:"#req",value:$("#req").val()})});$("#deadline").on("change",function(){e.emit("beingEdited",{field:"#deadline",value:$("#deadline").val()})});$(".description").blur(function(){e.emit("finishedEditing",{field:"description",value:$(".description").val()})});e.emit("getTasks",{scale:2120});e.on("getTasksSuccess",function(e){console.log(e.length);var t=500/e.length;console.log(t);$("ul.tasks").empty();e.sort(function(e,t){e=new Date(e.deadline);t=new Date(t.deadline);return e<t?-1:e>t?1:0});for(var n in e){var r=t;console.log("TOP "+r);var i=new Date(Date.parse(e[n].deadline)),s="<li class='task' style='top: "+r+"px;'> <span class='date'>"+i.getDate()+"/"+i.getMonth()+"/"+i.getFullYear()+"</span> <span class='entypo-cd icon'></span> <span class='text'>"+e[n].name+"</span></li>";$("ul.tasks").append(s)}});e.on("greyOutField",function(e){console.log(e.field);$(e.field).val(e.value);$(e.field).text(e.value)});e.on("editingCompleted",function(e){console.log("THIS IS DATA FIELD "+e.field);$(".description").val(e.value)});e.on("blah",function(e){registerClick()});$(".get-started").click(function(){alert(sessionStorage.getItem("username"))});$(".login-button").click(function(){var e=$(".username").val(),t=$(".password").val();sessionStorage.setItem("username",e);sessionStorage.setItem("password",t);$("nav.header-nav").css("opacity","0");$("nav.header-create").css("display","inline-block");window.setTimeout(function(){$("nav.header-nav").css("display","none");$("nav.header-create").css("opacity","1")},200)});initializeFormClickHandlers(e);initializeMapClickHandlers();functionForLogin();initializeModal();$("button.initiative").on("click",function(e){t()});$("span.close.icon").on("click",function(e){n()})});var provIndex=0;